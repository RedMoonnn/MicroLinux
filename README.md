# MicroLinux æœ€å° Linux ç³»ç»Ÿæ„å»ºé¡¹ç›®

æœ¬é¡¹ç›®æ—¨åœ¨å¸®åŠ©åˆå­¦è€…ä»é›¶æ­å»ºä¸€ä¸ªåŸºäº Linux å†…æ ¸ï¼ˆbzImageï¼‰å’Œ BusyBox çš„æœ€å° Linux ç³»ç»Ÿï¼Œå¹¶é€šè¿‡ QEMU å¯åŠ¨ä½“éªŒã€‚ä½ å°†å­¦ä¹ åˆ° Linux å†…æ ¸ã€initramfsã€BusyBox çš„åŸºç¡€çŸ¥è¯†åŠå®é™…æ“ä½œæµç¨‹ã€‚

---

## ğŸ“ ç›®å½•ç»“æ„

```plaintext
MicroLinux/
â”œâ”€â”€ busybox-1.36.1/         # busybox æºç åŠç¼–è¯‘ç›®å½•
â”œâ”€â”€ initramfs/              # ç”¨äºæ‰“åŒ… initramfs çš„æ ¹æ–‡ä»¶ç³»ç»Ÿç›®å½•
â”œâ”€â”€ initramfs.img           # æ‰“åŒ…ç”Ÿæˆçš„ initramfs é•œåƒ
â”œâ”€â”€ bzImage                 # Linux å†…æ ¸é•œåƒ
â”œâ”€â”€ Guide.md                # è¯¦ç»†æ“ä½œæ‰‹å†Œ
â””â”€â”€ README.md               # é¡¹ç›®ç®€ä»‹ï¼ˆæœ¬æ–‡ä»¶ï¼‰
```

---

## âš™ï¸ é¡¹ç›®åŸç†

MicroLinux çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨ Linux å†…æ ¸ï¼ˆbzImageï¼‰å’Œ BusyBox å·¥å…·ç®±ï¼Œé€šè¿‡ initramfsï¼ˆå†…å­˜æ–‡ä»¶ç³»ç»Ÿï¼‰å®ç°ä¸€ä¸ªæç®€å¯å¯åŠ¨çš„ Linux ç³»ç»Ÿã€‚

- **Linux å†…æ ¸ï¼ˆbzImageï¼‰**ï¼šè´Ÿè´£ç¡¬ä»¶ç®¡ç†ã€è¿›ç¨‹è°ƒåº¦ã€å†…å­˜ç®¡ç†ç­‰ï¼Œæ˜¯ç³»ç»Ÿçš„æ ¸å¿ƒã€‚
- **initramfs**ï¼ˆå¿…é¡»ï¼‰ï¼šä¸€ç§å†…å­˜ä¸­çš„ä¸´æ—¶æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œç³»ç»Ÿå¯åŠ¨æ—¶ç”±å†…æ ¸åŠ è½½ï¼ŒåŒ…å«å¯åŠ¨æ‰€éœ€çš„æœ€åŸºæœ¬æ–‡ä»¶å’Œè„šæœ¬ã€‚æ²¡æœ‰ initramfsï¼Œå†…æ ¸æ— æ³•æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œç³»ç»Ÿæ— æ³•æ­£å¸¸å¯åŠ¨ã€‚
- **BusyBox**ï¼ˆæ¨èä½†éå”¯ä¸€é€‰æ‹©ï¼‰ï¼šé›†æˆäº†å¸¸ç”¨ Linux å‘½ä»¤çš„è¶…å°å‹å·¥å…·ç®±ï¼Œæå¤§ç®€åŒ–äº†æœ€å°ç³»ç»Ÿçš„å®ç°ã€‚ä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å·¥å…·ç®±æˆ–è‡ªè¡Œç¼–è¯‘çš„é™æ€äºŒè¿›åˆ¶æ›¿ä»£ BusyBoxï¼Œä½†å¿…é¡»ä¿è¯æ ¹æ–‡ä»¶ç³»ç»Ÿå†…æœ‰å¯ç”¨çš„ shellï¼ˆå¦‚ /bin/shï¼‰å’Œå¿…è¦çš„å¯åŠ¨å‘½ä»¤ï¼Œå¦åˆ™ç³»ç»Ÿå¯åŠ¨åæ— æ³•è¿›å…¥å‘½ä»¤è¡Œç¯å¢ƒã€‚

**æ€»ç»“ï¼š**
- initramfs æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™å†…æ ¸æ— æ³•æ‰¾åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚
- BusyBox ä¸æ˜¯å”¯ä¸€é€‰æ‹©ï¼Œä½†ä½ å¿…é¡»ä¿è¯æœ‰å¯ç”¨çš„ shell å’ŒåŸºæœ¬å‘½ä»¤ï¼Œå¦åˆ™ç³»ç»Ÿæ— æ³•äº¤äº’ã€‚

**å¯åŠ¨æµç¨‹ç®€è¿°ï¼š**
1. QEMU å¯åŠ¨æ—¶åŠ è½½ bzImageï¼ˆå†…æ ¸ï¼‰å’Œ initramfs.imgï¼ˆæ ¹æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚
2. å†…æ ¸è§£å‹å¹¶æŒ‚è½½ initramfs ä¸ºæ ¹ç›®å½•ï¼ŒæŸ¥æ‰¾å¹¶æ‰§è¡Œæ ¹ç›®å½•ä¸‹çš„ `/init` è„šæœ¬ã€‚
3. `/init` è„šæœ¬æŒ‚è½½ procã€sysfs ç­‰ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼Œæœ€åæ‰§è¡Œ `/bin/sh`ï¼ˆç”± busybox æˆ–å…¶ä»– shell æä¾›ï¼‰ï¼Œè¿›å…¥å‘½ä»¤è¡Œç¯å¢ƒã€‚
4. ç”¨æˆ·å³å¯åœ¨æœ€å° Linux ç¯å¢ƒä¸‹ä½“éªŒåŸºæœ¬å‘½ä»¤å’Œæ“ä½œã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **å‡†å¤‡ BusyBox**
   - ä¸‹è½½å¹¶é™æ€ç¼–è¯‘ busyboxï¼Œç¡®ä¿ `file busybox` è¾“å‡ºåŒ…å« `statically linked`ã€‚
2. **æ„å»º initramfs æ ¹ç›®å½•ç»“æ„**
   - åˆ›å»º `initramfs/` åŠå…¶å­ç›®å½•ï¼Œå°† busybox æ‹·è´åˆ° `bin/` å¹¶ç”Ÿæˆè½¯é“¾æ¥ã€‚
3. **ç¼–å†™ /init å¯åŠ¨è„šæœ¬**
   - å†…å®¹ç¤ºä¾‹ï¼š
     ```sh
     #!/bin/sh
     mount -t proc none /proc
     mount -t sysfs none /sys
     echo "Welcome to my custom Linux!"
     exec /bin/sh
     ```
   - èµ‹äºˆæ‰§è¡Œæƒé™ï¼š`chmod +x initramfs/init`
4. **æ‰“åŒ… initramfs é•œåƒ**
   - åœ¨ `initramfs/` ç›®å½•ä¸‹æ‰§è¡Œï¼š
     ```bash
     find . -print0 | cpio --null -ov --format=newc | gzip -9 > ../initramfs.img
     ```
5. **å‡†å¤‡ Linux å†…æ ¸ï¼ˆbzImageï¼‰**
   - å¯ç”¨ç°æˆ bzImage æˆ–è‡ªè¡Œç¼–è¯‘ã€‚
6. **ç”¨ QEMU å¯åŠ¨ç³»ç»Ÿ**
   - å¯åŠ¨å‘½ä»¤ï¼š
     ```bash
     qemu-system-x86_64 -kernel bzImage -initrd initramfs.img -nographic -append "console=ttyS0"
     ```

---

## ğŸ“ ä¸»è¦æ–‡ä»¶è¯´æ˜
- `busybox-1.36.1/`ï¼šBusyBox æºç åŠç¼–è¯‘äº§ç‰©
- `initramfs/`ï¼šæ ¹æ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼ŒåŒ…å«å¯åŠ¨è„šæœ¬å’Œå¿…è¦ç›®å½•
- `initramfs.img`ï¼šæ‰“åŒ…åçš„å†…å­˜æ–‡ä»¶ç³»ç»Ÿé•œåƒ
- `bzImage`ï¼šLinux å†…æ ¸é•œåƒ
- `Guide.md`ï¼šè¯¦ç»†æ“ä½œæ‰‹å†Œï¼Œé€‚åˆåˆå­¦è€…
- `README.md`ï¼šé¡¹ç›®ç®€ä»‹

---

## ğŸ“š è¿›é˜¶é˜…è¯»
è¯¦ç»†æ“ä½œæ­¥éª¤ã€åŸç†è¯´æ˜åŠæ›´å¤šæ’æŸ¥æŠ€å·§è¯·å‚è€ƒ `Guide.md`ã€‚

---

å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿æ issue æˆ–ç•™è¨€äº¤æµï¼ 